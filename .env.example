# ==============================================================================
# DATABASE CONFIGURATION
# ==============================================================================

# PostgreSQL connection string for Prisma ORM
# Format: postgresql://USER:PASSWORD@HOST:PORT/DATABASE?schema=SCHEMA
# 
# Examples:
#   Local:      postgresql://postgres:password@localhost:5432/ai_email_assistant_v2?schema=public
#   Docker:     postgresql://postgres:password@db:5432/ai_email_assistant_v2?schema=public
#   Production: Use connection string from your PostgreSQL hosting provider
#
# Required: Yes
DATABASE_URL="postgresql://postgres:postgres@localhost:5432/crm?schema=public"

# ==============================================================================
# APPLICATION CONFIGURATION
# ==============================================================================

# Node environment (development, production, test)
# Default: development
NODE_ENV="development"

# ==============================================================================
# PASSWORD AUTHENTICATION
# ==============================================================================

# Application access password for simple password-based authentication
# This replaces the previous OAuth-based authentication
# 
# SECURITY: 
# - Choose a strong, unique password
# - Keep this secret secure and never commit to version control
# - Change this password regularly in production
#
# Required: Yes
APP_PASSWORD="your-secure-password-here"

# Secret key for signing authentication cookies (HMAC)
# Generate with: node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
#
# SECURITY:
# - Generate a strong random value
# - Keep this secret secure and never commit to version control
# - Changing this will invalidate all existing sessions
#
# Required: Yes
AUTH_SECRET="your-random-secret-key-here"

# ==============================================================================
# MICROSOFT AZURE AD APP-ONLY AUTHENTICATION
# ==============================================================================

# Azure AD Application (Client) ID
# Found in: Azure Portal > App registrations > Your app > Overview
# Required: Yes (for email functionality)
AZURE_AD_CLIENT_ID="your-azure-ad-client-id"

# Azure AD Client Secret
# Found in: Azure Portal > App registrations > Your app > Certificates & secrets
# NOTE: Copy the secret VALUE (not the Secret ID) immediately after creation
# Required: Yes (for email functionality)
AZURE_AD_CLIENT_SECRET="your-azure-ad-client-secret"

# Azure AD Directory (Tenant) ID
# Found in: Azure Portal > App registrations > Your app > Overview
# Required: Yes (for email functionality)
AZURE_AD_TENANT_ID="your-azure-ad-tenant-id"

# Mailbox UPN (User Principal Name)
# The email address of the mailbox to access
# Example: matt@calnan.co
#
# IMPORTANT: This is the mailbox that the app will access for reading/sending emails
# The Azure AD app must have application-level permissions to access this mailbox
#
# Required: Yes (for email functionality)
GRAPH_MAILBOX_UPN="matt@calnan.co"

# Microsoft Graph API Permissions Required (Application-level):
# - Mail.ReadWrite (application): Read and write mail in all mailboxes
# - Mail.Send (application): Send mail as any user
#
# IMPORTANT SETUP NOTES:
# 1. Configure these as APPLICATION permissions (not delegated)
# 2. Grant admin consent in Azure AD portal
# 3. No OAuth redirect URIs needed for app-only auth
# 4. Authentication uses client credentials flow (client ID + client secret)

# ==============================================================================
# AI PROVIDER CONFIGURATION
# ==============================================================================

# OpenAI API Key for AI draft generation, email analysis, and priority scoring
# Get your key from: https://platform.openai.com/api-keys
#
# AI Features:
#   - Email priority scoring (1-5 scale with urgency classification)
#   - Email summarization (2-3 sentence summaries)
#   - AI-generated reply drafts (uses Calnan Brain context)
#
# Required: Yes (for AI features)
# Optional: System degrades gracefully if not configured (manual replies only)
AI_PROVIDER_KEY="your-openai-api-key"

# AI Model to use for email processing
# Options: gpt-4o, gpt-4o-mini, gpt-4-turbo, gpt-3.5-turbo
# Recommended: gpt-4o-mini (fast, cost-effective) or gpt-4o (highest quality)
#
# Default: gpt-4o-mini (if not specified)
# Optional: Falls back to gpt-4o-mini if not specified
# 
# Notes:
#   - All AI calls have a 10-second timeout for performance
#   - Brain context (core.md + DB rules/projects) is injected in all prompts
AI_MODEL="gpt-4o-mini"
